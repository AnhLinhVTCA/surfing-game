(this["webpackJsonpsurfing-game-local"]=this["webpackJsonpsurfing-game-local"]||[]).push([[0],{29:function(e,t,a){e.exports=a(57)},31:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(3),d=a(2),s=(a(31),a(0)),o=a(20),h=a.n(o),c=function(){},u=function(e){var t=e.update,a=void 0===t?c:t,n=e.destroy;return{update:a,destroy:void 0===n?c:n}},g=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e.x*a,i=e.y*a,r=t[0],d=t[0]+t[2],s=t[1],o=t[1]+t[3];return!(n<r||n>d||i<s||i>o)},f=a(4),l=a(5),p=(a(7),function(e,t,a,n,i,r){var d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=e.width,o=e.height,h=a,c=h/o*s,u=0;return{update:function(e){for(u-=r*e;u<=-(c+d);)u+=c+d},draw:function(a){for(var r=u;r<t;)e.draw(a,n+r,i,c,h),r+=c+d}}}),w=p,v=function(){var e,t;return{init:function(a,n){var i=a.waterY,r=n.assets,d=n.width,s=n.height,o=r.psAtlas,h=o.findRegion("parallax_BG_sky",-1),c=o.findRegion("parallax_BG_water",-1),u=o.findRegion("parallax_BG_cloud1",-1),g=o.findRegion("parallax_BG_cloud2",-1),l=o.findRegion("parallax_BG_cloud3",-1),p=o.findRegion("parallax_BG_cloud4",-1),v=o.findRegion("parallax_BG_hondao",-1),m=o.findRegion("parallax_BG_ngon_hai_dang",-1);t=h;var b=i+s/200-s/20,y=w(c,d,s,-d/10,i-s/20,0),x=w(u,d,s/16,0,b-s/16,d/10,1.5*d),O=w(g,d,s/11,0,b-s/11,d/8,1.5*d),j=w(l,d,s/8,0,b-s/8,d/6,1.5*d),R=w(p,d,s/6,0,b-s/6,d/4,1.5*d),_=w(v,d,s/30,0,b-s/30+s/200,d/4,d),S=w(m,d,s/20,d,b-s/20,d/4,5*d);(e=function(){var e=[];return{add:function(t){return e.push(t)},addAll:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];for(var i=0,r=a;i<r.length;i++){var d=r[i];e.push(d)}},update:function(t){var a,n=Object(f.a)(e);try{for(n.s();!(a=n.n()).done;){a.value.update(t)}}catch(i){n.e(i)}finally{n.f()}},draw:function(t){var a,n=Object(f.a)(e);try{for(n.s();!(a=n.n()).done;){a.value.draw(t)}}catch(i){n.e(i)}finally{n.f()}}}}()).add(y),e.add(x),e.add(O),e.add(j),e.add(R),e.add(_),e.add(S)},update:function(a,n,i){var r=i.batch,d=i.width,s=i.height,o=i.camera;i.assets;o.setPosition(0,0),r.setProjection(o.combined),r.begin(),r.setColor(1,1,1,1),t.draw(r,0,0,d,s),e.update(a),e.draw(r),r.end()}}},m=function(e){var t=function(){var t=Object(d.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,y(e);case 3:return t.t1=t.sent,t.abrupt("return",t.t0.setCurrentScreen.call(t.t0,t.t1));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=e.gl,n=e.width,r=e.height,o=e.canvas,h=e.assets,c=e.pixelRatio,u=Object(s.c)(a),f=Object(s.e)(n,r,n,r),l=new s.a(o),p=h.goAtlas,w=h.bonusAtlas,v=w.findRegion("end_screen_bg",-1),m=p.findRegion("reload",-1),b=w.findRegion("game_over",-1),x=r,O=x*v.width/v.height,j=n/3,R=j*m.height/m.width,_=[n/2-j/2,2.9*r/4,j,R],S=r/2.5,P=S*b.width/b.height;l.addEventListener("touchStart",(function(a,n){g({x:a,y:n},_,c)&&(t(),e.gender=1)}));return{update:function(e){f.setPosition(0,0),u.setProjection(f.combined),u.begin(),u.setColor(1,1,1,1),v.draw(u,n/2-O/2,r/2-x/2,O,x),m.draw(u,n/2-j/2,2.9*r/4,j,R),b.draw(u,n/2-P/2,1.2*r/5,P,S),u.end()},destroy:function(){l.cleanup()}}},b=function(e){var t=e.gender,a=e.canvas,n=e.pixelRatio,r=e.width,o=e.height,h=e.gl,c=e.batch,u=e.camera,g=e.whiteTex,p=e.assets,w=new s.a(a),b=r/6,y={rewardCount:0,goingUpTime:0,win:!1,gameOver:!1,gender:t,stateTime:0,playerState:{x:b,y:2*o/3,speedX:0,speedY:0,width:r/8,height:r/7,jumping:!1,stateTime:0},waterY:o/2.1+o/20,obstacles:[],rewards:[],gap:b,lastObstacleX:2*r,lastRewardX:2*r,obstacleInfos:{widths:[r/9,r/3,r/3.5,r/9],heights:[o/20,o/4,o/4,r/9],speedXs:[-r/3,0,0,0]},rewardInfos:{width:r/9,height:r/9},playerInfo:{fallingSpeed:o/3,jumpingSpeed:1.2*-o,jumpingDecelerator:2*o,inWaterSpeedX:r/2,onAirSpeedX:r}},x=function(e,t){var a=[],n=[];return{addSystem:function(i){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i.init&&i.init(e,t),r?n.push(i):a.push(i)},update:function(i){var r,d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=Object(f.a)(a);try{for(s.s();!(r=s.n()).done;){var o=r.value;o.update(i,e,t)}}catch(g){s.e(g)}finally{s.f()}if(d){var h,c=Object(f.a)(n);try{for(c.s();!(h=c.n()).done;){var u=h.value;u.update(i,e,t)}}catch(g){c.e(g)}finally{c.f()}}}}}(y,{canvas:a,pixelRatio:n,width:r,height:o,gl:h,batch:c,camera:u,whiteTex:g,inputHandler:w,assets:p});x.addSystem({update:function(e,t,a){var n=a.inputHandler,i=a.height,r=t.playerState,d=t.waterY,s=t.playerInfo,o=s.fallingSpeed,h=s.jumpingSpeed,c=s.jumpingDecelerator,u=s.inWaterSpeedX,g=s.onAirSpeedX;r.jumping?(r.speedY+=c*e,r.speedX=g,r.y+r.height>1.1*d&&(r.jumping=!1)):(r.speedX=u,n.isTouched()&&(t.goingUpTime=t.stateTime+.15),t.goingUpTime>=t.stateTime?r.speedY=-o:r.speedY=o/2,r.y+r.height<.9*d&&(r.jumping=!0,r.speedY=h)),r.x+=r.speedX*e,r.y+=r.speedY*e,r.y>i-r.height-i/10&&(r.y=i-r.height-i/10)}},!0),x.addSystem(function(){var e=function(e,t,a,n,i,r){Math.random()>.4&&e.push({x:(a+t)/2,y:Math.random()*(n/3-n/8)+n/8,type:0,speedX:i.speedXs[0],stateTime:0}),Math.random()>.5?e.push({x:(a+t)/2,y:n-i.heights[1],type:1,speedX:i.speedXs[1],stateTime:0}):e.push({x:(a+t)/2,y:n-i.heights[2],type:2,speedX:i.speedXs[2],stateTime:0}),Math.random()>.3&&e.push({x:a,y:2.6*n/4,speedX:i.speedXs[3],type:3})};return{update:function(t,a,n){for(var i=n.width,r=n.height,d=a.playerState.x,s=a.obstacles,o=a.gap,h=a.lastObstacleX,c=a.obstacleInfos;h-d<2*i;)e(s,h+2*i,h+4*i,r,c,a.stopSpawnBird),h=a.lastObstacleX=h+2*i;for(var u=s.length-1;u>=0;u--){var g=s[u],l=g.type,p=g.x;s[u].x+a.obstacleInfos.widths[l]<p-o&&s.splice(u,1)}var w,v=Object(f.a)(s);try{for(v.s();!(w=v.n()).done;){var m=w.value;m.x+=m.speedX*t}}catch(b){v.e(b)}finally{v.f()}}}}(),!0),x.addSystem({update:function(e,t){var a=t.playerState,n=t.obstacles,i=t.obstacleInfos;if(n.length>0)for(var r=i.widths,d=i.heights,s=a.x,o=a.x+a.width,h=a.y,c=a.y+a.height,u=n.length-1;u>=0;u--){var g=n[u],f=g.x,l=g.y,p=g.type,w=f,v=f+r[p],m=l,b=l+d[p];s<v&&o>w&&h<b&&c>m&&(t.gameOver=!0)}}},!0),x.addSystem(function(){var e=0;return{init:function(t,a){var n=a.assets,i=a.width,r=(a.height,n.psAtlas.findRegion("hop_qua2",-1));e={texTure:r,width:i/6,height:i/6*r.height/r.width}},update:function(t,a,n){var i=a.rewards,r=a.playerState.x,d=a.gap,s=n.batch,o=(n.width,n.height,n.camera);n.whiteTex;o.setPosition(r-d,0),s.setProjection(o.combined),s.begin(),s.setColor(1,1,1,1);var h,c=Object(f.a)(i);try{for(c.s();!(h=c.n()).done;){var u=h.value;u.hit||e.texTure.draw(s,u.x+u.width/2-e.width/2,u.y+u.height/2-e.height/2,e.width,e.height)}}catch(g){c.e(g)}finally{c.f()}s.end()}}}(),!0),x.addSystem({update:function(e,t){var a=t.playerState,n=t.rewards,i=t.rewardInfos;if(n.length>0)for(var r=a.x,d=a.x+a.width,s=a.y,o=a.y+a.height,h=n.length-1;h>=0;h--)if(!n[h].hit){var c=n[h].x,u=n[h].x+i.width,g=n[h].y,f=n[h].y+i.height;r<u&&d>c&&s<f&&o>g&&(n[h].hit=!0,t.rewardCount+=1)}}},!0),x.addSystem(v()),x.addSystem(function(){var e,t=0,a=0,n=0;return{init:function(n,i){var r=n.waterY,d=i.width,o=i.height,h=i.assets.waveAtlas.findRegions("final wave");e=Object(s.b)(.1,h),t=d,r+(a=h[0].height*t/h[0].width)-o/20<o&&(a=o-(r-o/20))},update:function(i,r,d){var s=r.waterY,o=d.batch,h=(d.width,d.height),c=d.camera;n+=i,c.setPosition(0,0),o.setProjection(c.combined),o.begin(),e.getKeyFrame(n,l.a.LOOP).draw(o,0,s-h/20,t,a),o.end()}}}()),x.addSystem(function(){var e,t,a,n,i,r,d,o,h,c,u,g,p,w,v,m,b,y;return{init:function(f,l){f.obstacleInfos;var x=l.assets,O=l.width,j=l.height,R=x.psAtlas;e=R.findRegion("cuc_da",1),t=R.findRegion("cuc_da",2),a=R.findRegion("sao_bien",-1);var _=R.findRegions("chim"),S=R.findRegions("bachtuoc"),P=R.findRegions("cua");n=Object(s.b)(.15,_),i=Object(s.b)(.15,S),r=Object(s.b)(.15,P),d=O/5,p=_[0].height*d/_[0].width,u=(b=j/3)*e.width/e.height,g=(y=j/3)*t.width/t.height,w=j/6,o=S[0].width*w/S[0].height,v=j/11,h=P[0].width*v/P[0].height,c=(m=j/12)*a.width/a.height},update:function(s,x,O){var j=x.obstacles,R=x.playerState.x,_=x.gap,S=x.obstacleInfos,P=S.widths,T=S.heights,C=O.batch,X=O.camera,I=(O.whiteTex,O.assets,O.width),G=O.height;X.setPosition(R-_,0),C.setProjection(X.combined),C.begin();var A,B=Object(f.a)(j);try{for(B.s();!(A=B.n()).done;){var L=A.value,M=L.type,Y=L.x,F=L.y;0===M&&(L.stateTime+=s,n.getKeyFrame(L.stateTime,l.a.LOOP_PINGPONG).draw(C,Y+P[M]/2-d/2,F+T[M]/2-p/2,d,p)),1===M&&(L.stateTime+=s,e.draw(C,Y+P[M]/2-u/2-I/16,F+T[M]-b+G/80,u,b),r.getKeyFrame(L.stateTime,l.a.LOOP_PINGPONG).draw(C,Y-h/2+I/20,F-v/2+G/20,h,v),a.draw(C,Y+u/5,F+b/2.7,c,m)),2===M&&(L.stateTime+=s,t.draw(C,Y+P[M]/2-g/2+I/16,F+T[M]-y+G/60,g,y),i.getKeyFrame(L.stateTime,l.a.LOOP_PINGPONG).draw(C,Y-o/2+I/20,F-o/2,o,w)),3===M&&a.draw(C,Y+P[M]/2-c/2,F+T[M]/2-m/2,c,m)}}catch(N){B.e(N)}finally{B.f()}C.end()}}}()),x.addSystem(function(){var e=function(e,t,a,n,i,r,d){Math.random()>.6?e.push({x:a,y:n/4,width:r.width,height:r.width,hit:!1,type:Math.floor(3*Math.random()),popUpScreen:!1}):Math.random()>.9&&e.push({x:a,y:6.6*n/8,width:r.width,height:r.width,hit:!1,type:Math.floor(3*Math.random()),popUpScreen:!1})};return{update:function(t,a,n){for(var i=n.width,r=n.height,d=a.playerState.x,s=a.rewards,o=a.lastRewardX,h=a.rewardInfos;o-d<2*i;)e(s,0,o+4*i,r,0,h),o=a.lastRewardX=o+2*i}}}()),x.addSystem(function(){var e,t,a,n,i,r=0,d=0,o=0,h=0,c=0;return{init:function(u,g){var f=u.gender,l=(u.playerState,g.assets),p=g.width;g.height;t=l.psAtlas,0===f?(e=t.findRegions("male"),i=t.findRegion("male_jump",-1)):(e=t.findRegions("female"),i=t.findRegion("female_jump",-1));var w=t.findRegions("bubble");n=Object(s.b)(.2,w),a=Object(s.b)(.3,e),r=p/3.2,d=e[0].height*r/e[0].width,c=i.height*r/i.width,o=p/6,h=w[0].height*o/w[0].width},update:function(e,t,s){var u=t.playerState,g=t.gap,f=s.batch,p=s.camera;s.whiteTex,s.width;p.setPosition(u.x-g,0),f.setProjection(p.combined),f.begin(),u.stateTime+=e,u.jumping?i.draw(f,u.x+u.width/2-r/2,u.y+u.height/2-c/2,r,c):a.getKeyFrame(u.stateTime,l.a.LOOP_PINGPONG).draw(f,u.x+u.width/2-r/2,u.y+u.height/2-d/2,r,d),n.getKeyFrame(u.stateTime,l.a.LOOP_PINGPONG).draw(f,u.x-r/2,u.y+u.height,o,h,o/2,h/2,0,1,1),f.end()}}}()),x.addSystem(function(){var e,t,a,n,i,r,d,s,o=[],h=0,c=0,u=0,g=0,f=0;return{init:function(l,p){var w=p.assets,v=(p.width,p.height),m=w.score;e=m.findRegion("0_score",-1),t=m.findRegion("1_score",-1),a=m.findRegion("2_score",-1),n=m.findRegion("3_score",-1),i=m.findRegion("4_score",-1),r=m.findRegion("5_score",-1),o=[(h=v/26)*e.width/e.height,h*t.width/t.height,h*a.width/a.height,h*n.width/n.height,h*i.width/i.height,h*r.width/r.height],d=m.findRegion("hopqua_score",-1),s=m.findRegion("x_score",-1),c=(u=v/16)*d.width/d.height,g=(f=v/45)*s.width/s.height},update:function(l,p,w){var v=w.batch,m=w.camera,b=w.width/16,y=w.height/50;m.setPosition(0,0),v.setProjection(m.combined),v.begin(),d.draw(v,b,y,c,u),s.draw(v,b+3.5*c/5,y+3.5*u/5,g,f);var x=0;0===p.rewardCount&&(x=e),1===p.rewardCount&&(x=t),2===p.rewardCount&&(x=a),3===p.rewardCount&&(x=n),4===p.rewardCount&&(x=i),5===p.rewardCount&&(x=r),x.draw(v,b+1.2*c,y+u-h,o[p.rewardCount],h),v.end()}}}());var O=function(){var t=Object(d.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,m(e);case 3:return t.t1=t.sent,t.abrupt("return",t.t0.setCurrentScreen.call(t.t0,t.t1));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{update:function(e){5===y.rewardCount?(e,x.update(e)):y.gameOver?O():(y.stateTime+=e,x.update(e))},destroy:function(){w.cleanup()}}},y=function(e){var t=function(){var t=Object(d.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,b(e);case 3:return t.t1=t.sent,t.abrupt("return",t.t0.setCurrentScreen.call(t.t0,t.t1));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=e.width,n=e.height,r=e.assets,o=e.canvas,h=e.pixelRatio,c=e.batch,f=e.camera,l=new s.a(o),p=r.csAtlas;window.atlas=p;var w,v=p.findRegion("bg",-1),m=n,y=m*v.width/v.height,x=p.findRegion("btn_play",-1),O=a/4,j=O*x.height/x.width,R=p.findRegion("select_character",-1),_=2.81*a/4,S=_*R.height/R.width,P=p.findRegion("fmale__inactive",-1),T=n/3.6,C=T*P.width/P.height,X=p.findRegion("fmale",-1),I=n/2.8,G=I*X.width/X.height,A=p.findRegion("male_inactive",-1),B=n/3.6,L=B*A.width/A.height,M=p.findRegion("male",-1),Y=n/2.8,F=Y*M.width/M.height,N=[a/1.9+a/20,4.8*n/6-B,L,B],k=[a/1.9-C-a/20,4.8*n/6-B,C,T],E=[a/2-O/2,6.2*n/7,O,j],K=!0;return l.addEventListener("touchStart",(function(t,a){g(w={x:t,y:a},N,h)&&(K=!1,e.gender=0),g(w,k,h)&&(K=!0,e.gender=1)})),l.addEventListener("touchStart",(function(e,a){g(w,E,h)&&t()})),u({update:function(e){f.setPosition(0,0),c.setProjection(f.combined),c.begin(),v.draw(c,a/2-y/2,n/2-m/2,y,m),x.draw(c,a/2-O/2,6.2*n/7,O,j),R.draw(c,a/2-_/2,5.75*n/7,_,S),K?(X.draw(c,a/1.9-G,4.8*n/6-I,G,I),A.draw(c,a/1.9+a/20,4.8*n/6-B,L,B)):(M.draw(c,a/1.9,4.8*n/6-Y,F,Y),P.draw(c,a/1.9-C-a/20,4.8*n/6-B,C,T)),c.end()},destroy:function(){l.cleanup()}})};(function(){var e=Object(d.a)(i.a.mark((function e(){var t,a,n,d,o,c,u,g,f,l,p,w,v,m,b,x,O,j,R,_,S,P,T,C,X,I,G,A,B;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("main"),a=document.getElementById("info"),n=window.devicePixelRatio||1,d=Object(s.i)(t,n),o=Object(r.a)(d,2),c=o[0],u=o[1],g=t.getContext("webgl"),f=Object(s.c)(g),l=Object(s.e)(c,u,c,u),p=h()(g),w={gender:1,width:c,height:u,canvas:t,gl:g,batch:f,camera:l,whiteTex:p,pixelRatio:n,setCurrentScreen:function(e){w.currentScreen&&w.currentScreen.destroy(),w.currentScreen=e}},e.next=11,Object(s.h)(g,"./assets/loading.jpg");case 11:return v=e.sent,b=(m=u)*v.width/v.height,x=0,O=function(){l.setPosition(0,0),f.setProjection(l.combined),f.begin(),f.setColor(1,1,1,1),Object(s.f)(f,v,c/2-b/2,0,b,m),Object(s.f)(f,p,c/2-c/2.9,2.5*u/4-u/50,c/1.45,u/25),f.setColor(0,0,0,1),Object(s.f)(f,p,c/2-c/3,2.5*u/4-u/60,c/1.5,u/30),f.setColor(1,1,1,1);var e=x/6;Object(s.f)(f,p,c/2-c/3.1,2.5*u/4-u/80,c/1.55*e,u/40),f.end()},j=function(e){return e.then((function(e){return O(),x++,e}))},e.next=19,Promise.all([j(Object(s.g)(g,"./assets/surf.atlas")),j(Object(s.g)(g,"./assets/asset_wave.atlas")),j(Object(s.g)(g,"./assets/wave.atlas")),j(Object(s.g)(g,"./assets/end_surfing.atlas")),j(Object(s.g)(g,"./assets/score.atlas")),j(Object(s.g)(g,"./assets/final_asset.atlas"))]);case 19:return R=e.sent,_=Object(r.a)(R,6),S=_[0],P=_[1],T=_[2],C=_[3],X=_[4],I=_[5],G={csAtlas:S,psAtlas:P,waveAtlas:T,goAtlas:C,score:X,bonusAtlas:I},w.assets=G,e.t0=w,e.next=32,y(w);case 32:e.t1=e.sent,e.t0.setCurrentScreen.call(e.t0,e.t1),g.clearColor(1,.388,.012,1),A=function(e){g.clear(g.COLOR_BUFFER_BIT),w.currentScreen&&w.currentScreen.update(e)},B=Object(s.d)(A),setInterval((function(){return a.innerHTML="FPS: ".concat(B.getFps())}),500);case 38:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}},[[29,1,2]]]);
//# sourceMappingURL=main.4417dd52.chunk.js.map